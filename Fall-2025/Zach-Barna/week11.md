# Week 11 Design Log
## Explicit Statement: I am not stuck or blocked.
## Progress:
Progress this week has been very good, my most productive week so far. I have set up the Latch and Forwarding IFs in the cyclesim that we will use to connect all the pipeline stages, the Latch IF being the software "flip flop" for stages to pass data between, and the Forwarding IF being the data structure that a pipeline stage writes to if it needs to forward any signals back to a previous stage. In our case, since we don't have any "data" to forward back in the pipeline, the Forwarding IF will be used as a method to create feedback loops/provide feedback signals between stages in the need of applying backpressure/stalls up the pipeline. These IFs are fully functional and have been pushed to the GPU socet repo under a branch that I have opened. In addition to this, I have also made the register file class that will be used in the cyclesim that considers the following hierarchy: start with looking at warp_id and which bank the warp's context will live in. Once in the correct bank, we will look for the section in the bank that a warp lives in via its warp_id (relative to the bank), and then use the source/dest register to either read/write from the register file, which can be done at a warp granularity (read/write for 32 threads at a time), or at a thread granularity (read/write for one of the 32 threads at a time). I have also parameterized the reg file so that the number of banks, number of warps, number of regs per warp, and number of threads per warp can all be changed to do case studies on the effect of changing these parameters of the design. The register file logic is also complete and has been pushed to the GPU socet repo under the same branch I opened. Finally, Kai Ze and I have been working on the issue stage logic, which works very closely with the reg file and the OC, hence why I made a regfile class. This is not complete yet, but we are in the process of testing it and verifying that it does everything that we need it to do. It will be essential for us to use the Forwarding  IFs for the issue stage, since there will be many FUs providing feedback signals to us to determine which iBuffer to issue from next. 

Here is the link to the branch that I opened if whoever is reading this would like to see the work that I did for the week:
https://github.com/Purdue-SoCET/gpu/tree/zach_latch_forwarding_IFs/gpu_sim/cyclesim

The relevant files within this branch that I worked on are issue.py, latch_forward_stage.py, pipeline.py, and regfile.py

## Future Plans
Future plans are to get the issue stage done, and also for me to get the fetch stage done. As of right now, I can't really make any progress on the fetch stage until the iCache is complete, but once (I believe Felix) completes the iCache, the fetch stage should be very simple and I will get it implemented quickly. We are now just playing kind of a waiting game for everyone to get their individual stages complete, so in the mean time, I will work with other members to try to start hooking up multiple stages of the pipeline together with stalls and cycle accuracy to ensure everything is working as expected. I will also pitch in wherever needed if anyone needs additional help on a specific unit/stage within the frontend/backend. But for me, my next step is to work with Kai Ze to get the issue stage complete.